<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지 - 오마카세미루</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .tab-btn.active {
            border-bottom-color: #16a34a;
            color: #16a34a;
            background-color: #f0fdf4;
        }
        .tab-content.hidden {
            display: none;
        }
        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .admin-content {
            filter: blur(10px);
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Password Protection Modal -->
    <div id="authOverlay" class="admin-overlay hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-black text-gray-800 mb-2">🔒 관리자 인증</h2>
                <p class="text-sm text-gray-600">관리자 페이지에 접근하려면 비밀번호를 입력하세요</p>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-2">비밀번호</label>
                <input type="password" id="adminPassword"
                       class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                       placeholder="비밀번호를 입력하세요"
                       onkeypress="if(event.key === 'Enter') checkPassword()">
                <p id="authError" class="text-red-600 text-sm mt-2 hidden">비밀번호가 올바르지 않습니다</p>
            </div>

            <button onclick="checkPassword()"
                    class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition">
                로그인
            </button>

            <a href="index.html" class="block text-center text-sm text-gray-500 hover:text-gray-700 mt-4">
                ← 메인 페이지로 돌아가기
            </a>
        </div>
    </div>

    <div id="mainContent" class="admin-content">
    <!-- Header -->
    <header class="bg-gradient-to-r from-green-600 to-emerald-700 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <a href="index.html" class="flex items-center hover:opacity-80 transition">
                    <span class="text-2xl md:text-3xl font-black">⚽ 오마카세미루 - 관리자</span>
                </a>
                <div class="flex gap-4">
                    <a href="index.html" class="bg-white text-green-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition">
                        ← 메인으로
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Tab Navigation -->
        <section class="bg-white rounded-lg shadow-md mb-8">
            <div class="flex border-b">
                <button id="tab-products" class="tab-btn active flex-1 px-6 py-4 font-bold text-lg hover:bg-gray-50 transition border-b-4 border-green-600">
                    📦 제품 관리
                </button>
                <button id="tab-offers" class="tab-btn flex-1 px-6 py-4 font-bold text-lg hover:bg-gray-50 transition border-b-4 border-transparent">
                    🏪 판매처 관리
                </button>
            </div>
        </section>

        <!-- Tab Content: 제품 관리 -->
        <div id="content-products" class="tab-content">
            <!-- Product Management Section -->
            <section class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h2 class="text-2xl font-bold mb-6 text-gray-800">➕ 새 제품 추가</h2>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">팀 이름 *</label>
                        <input type="text" id="newProductTeam"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="예: 맨체스터 유나이티드">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">키트 유형 *</label>
                        <select id="newProductKitType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="홈킷">홈킷</option>
                            <option value="어웨이킷">어웨이킷</option>
                            <option value="써드킷">써드킷</option>
                            <option value="트레이닝">트레이닝</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">시즌 *</label>
                        <select id="newProductSeason" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="25/26">25/26</option>
                            <option value="24/25">24/25</option>
                            <option value="23/24">23/24</option>
                            <option value="22/23">22/23</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">버전 *</label>
                        <select id="newProductVersion" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="레플리카">레플리카 (팬 버전)</option>
                            <option value="어센틱">어센틱 (선수 버전)</option>
                        </select>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">제품명 *</label>
                        <input type="text" id="newProductName"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="예: 맨체스터 유나이티드 2024 2025 홈 유니폼 (레플리카)">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">모델 코드 *</label>
                        <input type="text" id="newProductModelCode"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="예: JI7428">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">이미지 URL *</label>
                        <input type="url" id="newProductImage"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="https://example.com/image.jpg">
                    </div>
                </div>

                <button id="addProductBtn"
                        class="mt-6 w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition">
                    제품 추가
                </button>
            </section>

            <!-- Product List -->
            <section class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h2 class="text-2xl font-bold mb-6 text-gray-800">📋 전체 제품 목록</h2>

                <div class="mb-4 flex gap-4">
                    <input type="text" id="searchProduct"
                           class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                           placeholder="제품명, 팀, 모델 코드로 검색...">
                    <select id="filterProductTeam" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">모든 팀</option>
                    </select>
                </div>

                <div id="productListTable" class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-bold text-gray-700">이미지</th>
                                <th class="px-4 py-3 text-left text-sm font-bold text-gray-700">제품명</th>
                                <th class="px-4 py-3 text-left text-sm font-bold text-gray-700">팀</th>
                                <th class="px-4 py-3 text-left text-sm font-bold text-gray-700">시즌</th>
                                <th class="px-4 py-3 text-left text-sm font-bold text-gray-700">버전</th>
                                <th class="px-4 py-3 text-left text-sm font-bold text-gray-700">모델코드</th>
                                <th class="px-4 py-3 text-center text-sm font-bold text-gray-700">판매처</th>
                                <th class="px-4 py-3 text-center text-sm font-bold text-gray-700">노출</th>
                                <th class="px-4 py-3 text-center text-sm font-bold text-gray-700">관리</th>
                            </tr>
                        </thead>
                        <tbody id="productListBody">
                            <!-- Products will be listed here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- Tab Content: 판매처 관리 -->
        <div id="content-offers" class="tab-content hidden">
            <!-- Product Selection -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">📦 제품 선택</h2>

            <div class="grid md:grid-cols-3 gap-4 mb-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">팀</label>
                    <select id="adminTeamFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">팀 선택</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">시즌</label>
                    <select id="adminSeasonFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">시즌 선택</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">키트 유형</label>
                    <select id="adminKitFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">키트 선택</option>
                    </select>
                </div>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">제품</label>
                <select id="productSelect" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    <option value="">제품을 선택하세요</option>
                </select>
            </div>

            <div id="selectedProductInfo" class="hidden mt-4 p-4 bg-gray-50 rounded-lg">
                <div class="flex items-center gap-4">
                    <img id="selectedProductImage" src="" alt="" class="w-24 h-24 object-cover rounded-lg">
                    <div>
                        <p class="font-bold text-lg" id="selectedProductName"></p>
                        <p class="text-sm text-gray-600" id="selectedProductCode"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Current Exchange Rates -->
        <section class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-8">
            <h2 class="text-xl font-bold mb-4 text-blue-900 flex items-center">
                💱 현재 환율 (실시간)
                <button id="refreshRates" class="ml-4 text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition">
                    새로고침
                </button>
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="exchangeRates">
                <div class="bg-white p-3 rounded-lg shadow">
                    <p class="text-xs text-gray-600">USD (미국 달러)</p>
                    <p class="text-lg font-bold text-gray-900" id="rate-USD">로딩 중...</p>
                </div>
                <div class="bg-white p-3 rounded-lg shadow">
                    <p class="text-xs text-gray-600">EUR (유럽 유로)</p>
                    <p class="text-lg font-bold text-gray-900" id="rate-EUR">로딩 중...</p>
                </div>
                <div class="bg-white p-3 rounded-lg shadow">
                    <p class="text-xs text-gray-600">GBP (영국 파운드)</p>
                    <p class="text-lg font-bold text-gray-900" id="rate-GBP">로딩 중...</p>
                </div>
                <div class="bg-white p-3 rounded-lg shadow">
                    <p class="text-xs text-gray-600">JPY (일본 100엔)</p>
                    <p class="text-lg font-bold text-gray-900" id="rate-JPY">로딩 중...</p>
                </div>
            </div>
            <p class="text-xs text-gray-600 mt-3">
                * 네이버 증권 실시간 환율 기준
                <a href="https://m.stock.naver.com/marketindex/home/exchangeRate/exchange#exchange"
                   target="_blank"
                   class="text-blue-600 hover:underline ml-2">
                    (환율 확인하기 →)
                </a>
            </p>
        </section>

        <!-- Offer Management -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">🏪 판매처 관리</h2>

            <!-- Add New Offer Form -->
            <div class="bg-green-50 border-2 border-green-200 rounded-lg p-6 mb-6">
                <h3 class="text-lg font-bold mb-4 text-green-900">➕ 판매처 추가</h3>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">판매처 이름 *</label>
                        <input type="text" id="newSiteName"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="예: 나이키 코리아">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">통화 *</label>
                        <select id="newCurrency" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="KRW">KRW (원화)</option>
                            <option value="USD">USD (달러)</option>
                            <option value="EUR">EUR (유로)</option>
                            <option value="GBP">GBP (파운드)</option>
                            <option value="JPY">JPY (엔)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">정가 *</label>
                        <div class="relative">
                            <input type="number" id="newRegularPrice"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                   placeholder="100000" step="0.01">
                            <span id="regularPriceKRW" class="absolute right-3 top-2 text-xs text-gray-500"></span>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">판매가 *</label>
                        <div class="relative">
                            <input type="number" id="newSalePrice"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                   placeholder="80000" step="0.01">
                            <span id="salePriceKRW" class="absolute right-3 top-2 text-xs text-gray-500"></span>
                        </div>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">구매 링크 *</label>
                        <input type="url" id="newAffiliateLink"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                               placeholder="https://www.example.com/product">
                    </div>
                </div>

                <div class="mt-4 p-4 bg-white rounded-lg border border-gray-200">
                    <p class="text-sm font-semibold text-gray-700 mb-2">할인율: <span id="calculatedDiscount" class="text-lg text-red-600">0%</span></p>
                    <p class="text-xs text-gray-500">* 할인율은 (정가 - 판매가) / 정가 × 100으로 자동 계산됩니다</p>
                </div>

                <button id="addOfferBtn"
                        class="mt-4 w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed">
                    판매처 추가
                </button>
            </div>

            <!-- Current Offers List -->
            <div>
                <h3 class="text-lg font-bold mb-4 text-gray-900">📋 현재 판매처 목록</h3>
                <div id="offersList" class="space-y-3">
                    <p class="text-gray-500 text-center py-8">제품을 먼저 선택해주세요</p>
                </div>
            </div>
        </section>

            <!-- Save Changes -->
            <section class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">변경사항 저장</h3>
                        <p class="text-sm text-gray-600">변경된 내용을 data.js 파일에 저장합니다</p>
                    </div>
                    <button id="saveChangesBtn"
                            class="bg-blue-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400">
                        💾 저장하기
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm">© 2024 오마카세미루 관리자 페이지</p>
        </div>
    </footer>
    </div> <!-- End of mainContent -->

    <!-- Authentication Script -->
    <script>
        // 관리자 비밀번호 (실제 배포 시 변경하세요)
        const ADMIN_PASSWORD = 'casemiro7';

        function checkPassword() {
            const input = document.getElementById('adminPassword').value;
            const errorMsg = document.getElementById('authError');

            if (input === ADMIN_PASSWORD) {
                // 인증 성공
                sessionStorage.setItem('adminAuth', 'true');
                document.getElementById('authOverlay').classList.add('hidden');
                document.getElementById('mainContent').classList.remove('admin-content');
                errorMsg.classList.add('hidden');
            } else {
                // 인증 실패
                errorMsg.classList.remove('hidden');
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').focus();
            }
        }

        // 페이지 로드 시 인증 확인
        window.addEventListener('DOMContentLoaded', function() {
            const isAuthenticated = sessionStorage.getItem('adminAuth') === 'true';

            if (isAuthenticated) {
                // 이미 인증됨
                document.getElementById('authOverlay').classList.add('hidden');
                document.getElementById('mainContent').classList.remove('admin-content');
            } else {
                // 인증 필요
                document.getElementById('authOverlay').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('adminPassword').focus();
                }, 100);
            }
        });
    </script>

    <script src="js/data.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
